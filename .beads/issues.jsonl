{"id":"vasp-lsp-3ng.2.1","title":"Harden parser tests for invalid/malformed inputs","description":"Expand parser tests to prevent server crashes on malformed user files.\n\n## Problem\nCurrent tests focus on valid files. Custom parsers need robust testing against malformed inputs to prevent server crashes.\n\n## Test Cases to Add\n\n### All Parsers\n- Empty files (0 bytes)\n- Files with only whitespace\n- Files with only comments\n- Extremely long lines (10KB+)\n- Binary content (accidentally opened)\n- Mixed line endings (CRLF + LF)\n- Unicode edge cases (BOM, RTL, zero-width chars)\n\n### INCAR-specific\n- Unclosed strings spanning multiple lines\n- Deeply nested line continuations\n- Invalid UTF-8 sequences in values\n- Extremely long tag names\n\n### POSCAR-specific\n- Coordinates with NaN/Infinity\n- Negative atom counts\n- Missing lattice vectors\n- Incomplete selective dynamics flags\n- Species names with special characters\n\n### KPOINTS-specific\n- Invalid generation modes\n- Negative k-point counts\n- Malformed reciprocal vectors\n\n## Files to create/modify\n- Expand: src/__tests__/unit/error-scenarios.test.ts\n- Create: src/__tests__/unit/parser-fuzzing.test.ts\n\n## Acceptance Criteria\n- [ ] All parsers handle edge cases gracefully\n- [ ] No exceptions thrown for malformed input\n- [ ] Appropriate diagnostics returned for invalid files\n- [ ] All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T13:48:38.560697-06:00","updated_at":"2026-01-05T14:37:24.958705-06:00","closed_at":"2026-01-05T14:37:24.958705-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.2.1","depends_on_id":"vasp-lsp-3ng.2","type":"parent-child","created_at":"2026-01-05T13:48:38.563544-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-5k4.2","title":"VS Code extension scaffold","description":"Create a minimal VS Code extension that launches vasp-lsp via vscode-languageclient and registers VASP file patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T15:28:57.842081-06:00","updated_at":"2026-01-05T15:30:49.705228-06:00","closed_at":"2026-01-05T15:30:49.705228-06:00","dependencies":[{"issue_id":"vasp-lsp-5k4.2","depends_on_id":"vasp-lsp-5k4","type":"parent-child","created_at":"2026-01-05T15:28:57.843145-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0.6","title":"Add Jest coverage thresholds","description":"Configure jest.config.js with minimum coverage thresholds. Add integration tests for LSP handlers (onHover, onCompletion, onSemanticTokens). Add error scenario tests for malformed input.","notes":"Added Jest coverage thresholds (80% statements, 65% branches, 80% functions, 80% lines). Configured coveragePathIgnorePatterns to exclude tests, tools, and entry point.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:45:00.521026-06:00","updated_at":"2025-12-29T21:59:02.713161-06:00","closed_at":"2025-12-29T21:59:02.713193-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.6","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:45:00.522069-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-hec","title":"Commit CRYSTAL23 feature and package rename","description":"Changes ready to commit: Package renamed vasp-language-server -\u003e dft-language-server (v1.1.0), new binary alias dft-lsp, CRYSTAL23 .d12 file support, KPOINTS validation enhancements","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:02:39.313187-06:00","updated_at":"2025-12-28T20:38:28.770299-06:00","closed_at":"2025-12-28T20:38:28.770303-06:00"}
{"id":"vasp-language-server-me1.5","title":"Improve file type detection robustness","description":"getFileType in lsp-server.ts uses simple string matching. Improve this to be more robust.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:02:56.76868-06:00","updated_at":"2026-01-05T13:10:12.580747-06:00","closed_at":"2026-01-05T13:10:12.58075-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.5","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.769168-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.2.2","title":"Test VASP Wiki scraper with mocked responses","description":"Add tests for the VASP Wiki scraper to prevent breakage from wiki format changes.\n\n## Problem\nsrc/tools/vasp-wiki.ts is untested. If the wiki format changes, the scraper could break silently.\n\n## Solution\n1. Create mock HTML responses matching expected wiki structure\n2. Extract parsing logic into testable functions\n3. Test tag extraction, type parsing, description parsing\n4. Test error handling for unexpected formats\n\n## Test Cases\n- Valid wiki page with complete tag definition\n- Wiki page with missing fields\n- Wiki page with malformed HTML\n- Network timeout handling\n- Rate limiting handling\n\n## Files to create/modify\n- Create: src/__tests__/unit/vasp-wiki.test.ts\n- Modify: src/tools/vasp-wiki.ts (extract testable functions)\n\n## Acceptance Criteria\n- [ ] Mock-based tests for wiki scraper\n- [ ] No network calls in tests\n- [ ] Tests for common failure modes\n- [ ] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:48:40.017151-06:00","updated_at":"2026-01-05T14:45:02.966317-06:00","closed_at":"2026-01-05T14:45:02.966317-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.2.2","depends_on_id":"vasp-lsp-3ng.2","type":"parent-child","created_at":"2026-01-05T13:48:40.017638-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-u80.3","title":"Auto-Formatting","description":"Implement formatting providers for INCAR, POSCAR, and KPOINTS","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-24T22:56:43.073355-06:00","updated_at":"2026-01-05T15:26:53.337482-06:00","closed_at":"2026-01-05T15:26:53.337482-06:00"}
{"id":"vasp-lsp-3ng.4.1","title":"Fix Jest worker process exit warning","description":"Resolve Jest worker process graceful exit warning.\n\n## Problem\nRunning `npm test` shows:\n'A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown.'\n\n## Investigation Steps\n1. Run tests with --detectOpenHandles\n2. Identify which test(s) are leaking\n3. Check for:\n   - Unclosed connections\n   - Active timers without .unref()\n   - Event listeners not cleaned up\n   - Async operations not awaited\n\n## Common Causes\n- LSP server connection not properly closed in tests\n- TextDocuments listener not unsubscribed\n- setInterval/setTimeout not cleared\n\n## Solution\nAdd proper teardown in test files:\n- afterAll() hooks to close connections\n- jest.useFakeTimers() for timer-heavy tests\n- Explicit connection.dispose() calls\n\n## Files to modify\n- src/__tests__/integration/server.test.ts (likely culprit)\n- Any test file using real connections\n\n## Acceptance Criteria\n- [ ] No worker process exit warning\n- [ ] All tests still pass\n- [ ] Test execution time not increased significantly","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:49:36.543871-06:00","updated_at":"2026-01-05T14:40:53.887093-06:00","closed_at":"2026-01-05T14:40:53.887093-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.4.1","depends_on_id":"vasp-lsp-3ng.4","type":"parent-child","created_at":"2026-01-05T13:49:36.547135-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.2","title":"Test Development \u0026 Coverage","description":"Expand test suite to improve robustness and coverage, particularly for edge cases and malformed inputs.\n\n## Goals\n- Harden parser tests for invalid/malformed inputs\n- Test VASP Wiki scraper with mocked responses\n- Improve coverage on weak areas identified in coverage report:\n  - logger.ts: 16% → 80%+\n  - poscar/hover.ts: 69% → 80%+\n  - poscar/semantic-tokens.ts: 73% → 80%+\n  - kpoints/hover.ts: 62% → 80%+\n\n## Current State\n- 134 tests passing\n- 85% statement coverage, 72% branch coverage\n- Coverage thresholds set: 80% statements, 65% branches","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T13:47:35.707376-06:00","updated_at":"2026-01-05T15:23:06.581247-06:00","closed_at":"2026-01-05T15:23:06.581247-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.2","depends_on_id":"vasp-lsp-3ng","type":"parent-child","created_at":"2026-01-05T13:47:35.710409-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-gz8","title":"Epic: Comprehensive Test Suite","description":"Implement a full test suite using Jest/Mocha. The previously deleted integration test was only a placeholder. We need unit tests for parsers, linters, and integration tests for the LSP server.","notes":"Expanded test suite from 79 to 104 tests (21 suites). Added poscar-linting.test.ts (10 tests) and error-scenarios.test.ts (15 tests) covering malformed input, truncated files, edge cases, and unusual formatting. Coverage thresholds now enforced via jest.config.js.","status":"closed","issue_type":"task","created_at":"2025-12-24T22:40:00.628087-06:00","updated_at":"2025-12-29T22:02:46.996457-06:00","closed_at":"2025-12-29T22:02:46.996471-06:00"}
{"id":"vasp-lsp-na0.3","title":"Implement consistent cache-first pattern","description":"Refactor LSP handlers to always check DocumentCache before parsing. Currently onHover, onSemanticTokens, onDocumentSymbol have inconsistent cache usage patterns leading to redundant parsing.","notes":"Refactored LSP handlers to use consistent cache-first pattern with getFileType(): onDocumentFormatting, onCodeAction, onDocumentSymbol, onFoldingRanges now all use switch statements on fileType with cache checking. Eliminated duplicate regex pattern matching.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T21:44:57.004491-06:00","updated_at":"2025-12-29T21:51:47.879249-06:00","closed_at":"2025-12-29T21:51:47.879267-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.3","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:44:57.005928-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng","title":"Repository Enhancement \u0026 Professionalization","description":"Comprehensive epic to enhance the vasp-lsp repository across all dimensions: architecture refactoring, test development, documentation, feature development, and cleanup. Based on deep analysis from Gemini CLI review.\n\n## Scope\n- Architecture: Extract FeatureProvider pattern, unify parsing utilities, standardize diagnostics\n- Testing: Harden parser tests, improve coverage on weak areas (logger, poscar hover/semantic-tokens)\n- Documentation: Document VASP Wiki tool, update architecture diagram, improve inline comments\n- Features: Complete VASP 6.5.x parity (existing u80 epic), custom LSP commands\n- Cleanup: Fix worker exit warning, audit dependencies, remove dead code\n\n## Success Criteria\n- All child epics completed\n- Coverage maintained at 80%+ for statements/lines/functions, 65%+ for branches\n- All tests passing\n- Clean ESLint/Prettier output","notes":"Related epics: vasp-lsp-u80 (VASP 6.5.x Feature Parity) - existing epic with child issues for POTCAR, KPOINTS, and Auto-Formatting support.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T13:47:16.211479-06:00","updated_at":"2026-01-05T15:23:16.887238-06:00","closed_at":"2026-01-05T15:23:16.887238-06:00"}
{"id":"vasp-language-server-me1.7","title":"Improve parser error reporting granularity","description":"Refine parsers to provide more granular and user-friendly error messages.","notes":"Implemented granular parser error reporting across all file types:\n\nINCAR:\n- Added line numbers to all error messages\n- Enhanced error for missing '=' with syntax suggestion\n- Enhanced error for missing values with examples\n- Added detection and reporting of invalid tokens (unclosed strings, etc.)\n\nPOSCAR:\n- Added comprehensive diagnostics infrastructure (new 'diagnostics' field in PoscarDocument)\n- File length validation with detailed structure explanation\n- Token-level validation with context-aware error messages for each block type\n- Specific errors for: scaling factors, lattice vectors, species names, atom counts, coordinates, selective dynamics flags, coordinate modes\n- Performance-optimized validation with fast path for large files (100k atoms in \u003c600ms)\n\nKPOINTS:\n- Enhanced k-point count validation with usage examples\n- Added mode validation with list of valid modes and explanations\n- Improved grid validation with specific invalid value identification\n- Enhanced auto-length validation with usage guidance\n- Added shift vector validation with common value suggestions\n- Added warnings for unusual shift values\n\nCRYSTAL:\n- Added minimum file length check with structure explanation\n- Empty title line warning\n- Missing geometry type error with all valid options\n- Unknown keyword detection with similar keyword suggestions\n- Numeric value validation with scientific notation support\n\nPOTCAR:\n- Added diagnostics infrastructure\n- Empty file detection\n- No elements found error with format explanations\n- Element symbol validation against periodic table\n- Duplicate element warnings\n\nAll changes verified with npm run lint (0 errors) and npm test (134 tests passing).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T13:02:56.867216-06:00","updated_at":"2026-01-05T13:16:03.189722-06:00","closed_at":"2026-01-05T13:16:03.189727-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.7","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.86781-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.1.2","title":"Unify parsing utilities across feature modules","description":"Extract common parsing logic into shared utilities.\n\n## Problem\nparsing.ts files in incar, poscar, and kpoints all reimplement basic text processing logic (splitting lines, handling whitespace, tracking offsets). Token interfaces are defined separately.\n\n## Solution\nCreate shared utilities in src/core/parser-utils.ts:\n\n1. Common Token interface:\n   - type: string (union of all token types)\n   - text: string\n   - range: Range\n\n2. LineTokenizer class/functions:\n   - splitLines(text: string): Line[]\n   - tokenizeLine(line: string, lineNum: number): Token[]\n   - handleWhitespace(text: string, offset: number): number\n   - trackOffset(text: string, patterns: RegExp[]): Match[]\n\n3. Common validation helpers:\n   - isNumber(text: string): boolean\n   - isInteger(text: string): boolean\n   - validateVector(tokens: Token[], expectedCount: number): Diagnostic[]\n   - parseScientificNotation(text: string): number | null\n\n4. Common diagnostic helpers:\n   - createDiagnostic(range: Range, message: string, severity: DiagnosticSeverity): Diagnostic\n\n## Files to modify\n- Create: src/core/parser-utils.ts\n- Update: src/features/incar/parsing.ts\n- Update: src/features/poscar/parsing.ts\n- Update: src/features/kpoints/parsing.ts\n- Update: src/features/crystal/parsing.ts\n\n## Acceptance Criteria\n- [ ] Common utilities extracted\n- [ ] All parsers use shared utilities where applicable\n- [ ] No duplication of line splitting/offset tracking logic\n- [ ] All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T13:48:10.377935-06:00","updated_at":"2026-01-05T14:35:03.758192-06:00","closed_at":"2026-01-05T14:35:03.758192-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.1.2","depends_on_id":"vasp-lsp-3ng.1","type":"parent-child","created_at":"2026-01-05T13:48:10.37918-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0.7","title":"Fix POSCAR parser state machine logic","description":"poscar/parsing.ts:318-324 has incorrect state tracking logic. 'isOk \u0026\u0026= true' doesn't properly handle false state. Should be explicit error handling or proper boolean accumulation.","notes":"Simplified processLine() function logic: removed confusing 'isOk \u0026\u0026= true' pattern, added early return when running out of lines, clearer control flow with immediate returns on failure. Preserved backtracking for optionalTest failures.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T21:45:01.944838-06:00","updated_at":"2025-12-29T21:52:55.910421-06:00","closed_at":"2025-12-29T21:52:55.910559-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.7","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:45:01.945992-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.4.3","title":"Remove dead code and unused exports","description":"Clean up dead code, unused exports, and commented-out code.\n\n## Goals\n1. Remove unused exports (TypeScript compiler warnings)\n2. Remove commented-out code blocks\n3. Remove unreachable code paths\n4. Remove unused helper functions\n\n## Investigation\n1. Enable TypeScript noUnusedLocals and noUnusedParameters\n2. Check ESLint for unused variables\n3. Search for TODO/FIXME comments with dead code\n4. Review each feature module for unused functions\n\n## Potential Areas\n- Backwards compatibility aliases (VaspStructure = DFTStructure)\n- Unused helper functions in utils/\n- Commented-out console.log statements\n- Development-only code paths\n\n## Files to check\n- All src/**/*.ts files\n- Focus on features/**/parsing.ts and linting.ts\n\n## Acceptance Criteria\n- [ ] No unused exports\n- [ ] No commented-out code blocks\n- [ ] TypeScript strict mode passes\n- [ ] All tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T13:49:38.795145-06:00","updated_at":"2026-01-05T15:02:09.497341-06:00","closed_at":"2026-01-05T15:02:09.497341-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.4.3","depends_on_id":"vasp-lsp-3ng.4","type":"parent-child","created_at":"2026-01-05T13:49:38.79715-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.1","title":"Architecture Refactoring","description":"Refactor the LSP server architecture to improve maintainability, extensibility, and code quality.\n\n## Goals\n- Decouple LspServer from specific file types using FeatureProvider pattern\n- Unify parsing utilities to reduce duplication across feature modules\n- Standardize diagnostic creation for consistent error reporting\n- Consolidate scattered type definitions\n\n## Rationale\nThe current LspServer class contains large switch statements for every LSP event, dispatching to specific feature modules. This violates the Open/Closed Principle and makes adding new file types difficult. Common parsing logic is duplicated across incar/poscar/kpoints parsers.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T13:47:34.53975-06:00","updated_at":"2026-01-05T15:23:03.362518-06:00","closed_at":"2026-01-05T15:23:03.362518-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.1","depends_on_id":"vasp-lsp-3ng","type":"parent-child","created_at":"2026-01-05T13:47:34.541539-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-me1.6","title":"Remove 'any' type in html-to-markdown.ts","description":"Refactor src/tools/html-to-markdown.ts to remove the single usage of any for better type safety.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-05T13:02:56.820329-06:00","updated_at":"2026-01-05T13:08:48.774593-06:00","closed_at":"2026-01-05T13:08:48.7746-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.6","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.821215-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-me1.1","title":"Fix brittle URI-to-path conversion in potcar/linting.ts","description":"The validatePotcar function uses manual URI-to-path conversion which is brittle and potentially insecure. Replace with a standard library or robust LSP method.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T13:02:56.578943-06:00","updated_at":"2026-01-05T13:07:35.307041-06:00","closed_at":"2026-01-05T13:07:35.307049-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.1","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.579463-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-me1.4","title":"Make DocumentCache size configurable","description":"The FIFO cache size is fixed at 50. Make this configurable for users with large projects.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T13:02:56.72378-06:00","updated_at":"2026-01-05T13:09:20.33584-06:00","closed_at":"2026-01-05T13:09:20.335844-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.4","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.724217-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-5k4.1","title":"Neovim plugin packaging","description":"Package the existing lua module as a Neovim plugin with a simple setup entry point and updated docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T15:28:48.097072-06:00","updated_at":"2026-01-05T15:29:25.974181-06:00","closed_at":"2026-01-05T15:29:25.974181-06:00","dependencies":[{"issue_id":"vasp-lsp-5k4.1","depends_on_id":"vasp-lsp-5k4","type":"parent-child","created_at":"2026-01-05T15:28:48.098533-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.5","title":"Custom LSP Commands","description":"Expose server-side logic to clients via workspace/executeCommand.\n\n## Goals\nImplement LSP custom commands for enhanced client integration.\n\n## Proposed Commands\n\n### vasp.previewStructure\nReturn a JSON representation of the parsed structure for client-side visualization.\n- Input: document URI\n- Output: JSON with lattice, atoms, coordinates\n\n### vasp.generatePotcar (future)\nConcatenate POTCAR files if paths are known.\n- Input: species list, POTCAR directory\n- Output: combined POTCAR content or path\n\n### vasp.validateWorkspace\nValidate all VASP files in workspace.\n- Input: workspace path\n- Output: aggregated diagnostics\n\n### vasp.formatWorkspace\nFormat all INCAR files in workspace.\n- Input: workspace path, formatting options\n- Output: edit operations\n\n## Implementation\n1. Add command handler in LspServer\n2. Register commands in onInitialize capabilities\n3. Implement workspace/executeCommand handler\n4. Document commands for client extensions\n\n## Acceptance Criteria\n- [ ] At least one custom command implemented\n- [ ] Commands documented\n- [ ] Client extension can invoke commands","notes":"Implemented vasp.previewStructure command and documented in README.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T13:49:55.04981-06:00","updated_at":"2026-01-05T15:22:25.035567-06:00","closed_at":"2026-01-05T15:22:25.035567-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.5","depends_on_id":"vasp-lsp-3ng","type":"parent-child","created_at":"2026-01-05T13:49:55.057029-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.1.1","title":"Extract FeatureProvider pattern from LspServer","description":"Refactor LspServer to use a FeatureProvider interface pattern.\n\n## Problem\nThe LspServer class contains large switch statements for every LSP event (onHover, onCompletion, etc.), dispatching to specific feature modules. This violates the Open/Closed Principle.\n\n## Solution\n1. Create FeatureProvider interface in src/core/feature-provider.ts:\n   - validate(doc: TextDocument): Diagnostic[]\n   - complete(params: CompletionParams): CompletionItem[]\n   - hover(params: HoverParams): Hover | null\n   - format(params: DocumentFormattingParams): TextEdit[]\n   - getSemanticTokens(params): SemanticTokens\n   - getSymbols(params): DocumentSymbol[]\n   - getFoldingRanges(params): FoldingRange[]\n   - getCodeActions(params): CodeAction[]\n\n2. Implement interface for each file type:\n   - IncarFeatureProvider\n   - PoscarFeatureProvider\n   - KpointsFeatureProvider\n   - PotcarFeatureProvider\n   - CrystalFeatureProvider\n\n3. Update LspServer to maintain a registry of providers:\n   - Map\u003cFileType, FeatureProvider\u003e\n   - Delegate events dynamically based on file type\n\n## Files to modify\n- src/core/lsp-server.ts\n- Create: src/core/feature-provider.ts\n- Create: src/features/*/provider.ts for each file type\n\n## Acceptance Criteria\n- [ ] FeatureProvider interface defined\n- [ ] All 5 file types implement the interface\n- [ ] LspServer uses provider registry instead of switch statements\n- [ ] All existing tests still pass\n- [ ] No change in LSP functionality","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T13:48:09.318853-06:00","updated_at":"2026-01-05T14:30:20.334381-06:00","closed_at":"2026-01-05T14:30:20.334381-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.1.1","depends_on_id":"vasp-lsp-3ng.1","type":"parent-child","created_at":"2026-01-05T13:48:09.320117-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.4","title":"Cleanup \u0026 Maintenance","description":"Code cleanup, dependency management, and maintenance tasks.\n\n## Goals\n- Fix Jest worker process exit warning\n- Audit and update dependencies\n- Remove dead code and unused exports\n- Clean up any remaining 'any' type usages\n\n## Current State\n- Jest shows 'worker process has failed to exit gracefully' warning\n- Dependencies appear up-to-date but should be audited\n- ESLint @typescript-eslint/no-explicit-any enabled as warning","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T13:47:38.560092-06:00","updated_at":"2026-01-05T15:02:20.80804-06:00","closed_at":"2026-01-05T15:02:20.80804-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.4","depends_on_id":"vasp-lsp-3ng","type":"parent-child","created_at":"2026-01-05T13:47:38.561168-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0.5","title":"Enable stricter ESLint rules","description":"Update eslint.config.mjs: change @typescript-eslint/no-explicit-any from 'off' to 'warn'. Add eqeqeq rule. Fix the 7+ instances of 'any' usage found in codebase.","notes":"Enabled stricter ESLint rules: changed no-explicit-any from off to warn, added eqeqeq rule. 16 remaining warnings are mostly in test files (acceptable) and tools files. Core source code is now clean of any usage.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:44:59.294273-06:00","updated_at":"2025-12-29T21:54:00.611745-06:00","closed_at":"2025-12-29T21:54:00.611762-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.5","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:44:59.295421-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-u80.1","title":"POTCAR Support","description":"Implement validation for POTCAR files, ensuring consistency with POSCAR geometry","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-24T22:56:39.739902-06:00","updated_at":"2026-01-05T15:26:57.114509-06:00","closed_at":"2026-01-05T15:26:57.114509-06:00"}
{"id":"vasp-language-server-me1","title":"Code Review Findings","description":"Issues found during comprehensive code review","notes":"All 7 child issues completed. Validated by Gemini code review - 134 tests passed, no regressions. Ready for merge.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T13:02:46.180687-06:00","updated_at":"2026-01-05T13:36:50.077166-06:00","closed_at":"2026-01-05T13:36:50.077173-06:00"}
{"id":"vasp-language-server-me1.2","title":"Improve INCAR formatting logic","description":"formatIncar uses naive indexOf('=') which fails on edge cases like comments containing '='. Refactor to use tokenized AST.","notes":"Refactored formatIncar to use tokenized AST from parseIncar instead of naive indexOf('='). Now correctly handles edge cases like comments containing '=' characters.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T13:02:56.627269-06:00","updated_at":"2026-01-05T13:10:00.3947-06:00","closed_at":"2026-01-05T13:10:00.394706-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.2","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.627915-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.3","title":"Documentation Improvements","description":"Improve documentation for developers and users.\n\n## Goals\n- Document VASP Wiki tool usage (npm run update-tags)\n- Update architecture diagram in docs/ARCHITECTURE.md\n- Add JSDoc comments to exported functions\n- Document CLAUDE.md patterns for AI-assisted development\n\n## Current State\n- Basic docs exist: ARCHITECTURE.md, NEOVIM.md, CONTRIBUTING.md, ADVANCED_CONFIGURATION.md\n- VASP Wiki scraper tool is undocumented\n- Missing data flow diagram","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T13:47:36.983027-06:00","updated_at":"2026-01-05T15:23:11.097384-06:00","closed_at":"2026-01-05T15:23:11.097384-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.3","depends_on_id":"vasp-lsp-3ng","type":"parent-child","created_at":"2026-01-05T13:47:36.984476-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.3.3","title":"Add JSDoc comments to exported functions","description":"Improve inline documentation for exported functions.\n\n## Problem\nMany exported functions lack JSDoc comments, making it harder for contributors to understand the codebase.\n\n## Solution\nAdd JSDoc comments to all public/exported functions in:\n- src/core/lsp-server.ts\n- src/core/document-cache.ts\n- src/features/*/parsing.ts (parse* functions)\n- src/features/*/linting.ts (validate* functions)\n- src/features/*/hover.ts (get*Hover functions)\n- src/utils/util.ts\n\n## Format\n```typescript\n/**\n * Brief description of what the function does.\n *\n * @param param1 - Description of first parameter\n * @param param2 - Description of second parameter\n * @returns Description of return value\n * @throws Description of exceptions (if any)\n *\n * @example\n * const result = parseIncar(document);\n */\n```\n\n## Acceptance Criteria\n- [ ] All exported functions have JSDoc\n- [ ] Parameter descriptions included\n- [ ] Return types documented\n- [ ] Examples where helpful","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T13:49:08.601269-06:00","updated_at":"2026-01-05T14:58:24.860754-06:00","closed_at":"2026-01-05T14:58:24.860754-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.3.3","depends_on_id":"vasp-lsp-3ng.3","type":"parent-child","created_at":"2026-01-05T13:49:08.602539-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-ubf","title":"Fix lint errors (7 errors, 21 warnings)","description":"Lint errors found after CRYSTAL23 integration: 5 @ts-expect-error directives missing descriptions, 1 @ts-ignore should be @ts-expect-error, 1 prefer-const error, plus 21 warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T13:02:36.993818-06:00","updated_at":"2025-12-28T13:06:59.218181-06:00","closed_at":"2025-12-28T13:06:59.218188-06:00"}
{"id":"vasp-lsp-na0.1","title":"Fix generic error handling in lsp-server.ts","description":"Replace generic catch(e) blocks with specific error type handling across all LSP handlers (lines 154-357). Add proper error type guards and consistent error logging format.","notes":"Fixed error handling in lsp-server.ts and potcar/linting.ts: changed generic catch(e) to proper error logging using logger.error(message, error) pattern. All 8 handler methods now use consistent error logging. Also fixed unused ts-expect-error in html-to-markdown.ts.","status":"closed","issue_type":"task","created_at":"2025-12-29T21:44:52.518659-06:00","updated_at":"2025-12-29T21:47:56.425726-06:00","closed_at":"2025-12-29T21:47:56.425746-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.1","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:44:52.520799-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.4.2","title":"Audit and update dependencies","description":"Review all dependencies for security, updates, and necessity.\n\n## Goals\n1. Check for security vulnerabilities (npm audit)\n2. Update outdated packages\n3. Remove unused dependencies\n4. Document dependency purposes\n\n## Steps\n1. Run npm audit and fix any issues\n2. Run npm outdated to identify update candidates\n3. Review each dependency:\n   - Is it still needed?\n   - Is there a lighter alternative?\n   - Is it actively maintained?\n\n## Current Dependencies (from package.json)\n### Runtime\n- @joplin/turndown-plugin-gfm: For GFM tables in markdown\n- axios: HTTP client for wiki scraping\n- cheerio: HTML parsing for wiki scraping\n- mathjax-full: Math rendering\n- mwn: MediaWiki API client\n- turndown: HTML to Markdown\n- vscode-languageserver: LSP protocol\n- vscode-languageserver-textdocument: Document handling\n- vscode-languageserver-types: LSP types\n\n### Dev\n- Standard TypeScript/Jest/ESLint tooling\n\n## Acceptance Criteria\n- [ ] npm audit shows 0 vulnerabilities\n- [ ] All dependencies at latest compatible versions\n- [ ] No unused dependencies\n- [ ] Dependencies documented in README or package.json","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T13:49:37.748042-06:00","updated_at":"2026-01-05T15:00:33.302495-06:00","closed_at":"2026-01-05T15:00:33.302495-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.4.2","depends_on_id":"vasp-lsp-3ng.4","type":"parent-child","created_at":"2026-01-05T13:49:37.749915-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.3.1","title":"Document VASP Wiki tool usage","description":"Document the VASP Wiki scraper tool for developers.\n\n## Problem\nsrc/tools/vasp-wiki.ts is a powerful tool for fetching the latest VASP tags from the wiki, but it's undocumented.\n\n## Solution\nAdd documentation explaining:\n1. What the tool does (scrapes VASP wiki, updates vasp-tags.ts)\n2. How to run it (npm run update-tags)\n3. When to run it (before releases, when new VASP version is out)\n4. Expected output and error handling\n5. Rate limiting considerations\n\n## Location\nAdd to CONTRIBUTING.md or create docs/DEVELOPER-TOOLS.md\n\n## Content\n### Updating VASP Tags\n\nThe `npm run update-tags` command fetches the latest VASP tag definitions from the official VASP Wiki.\n\n**When to run:**\n- Before a new release\n- When a new VASP version is released\n- When users report missing tags\n\n**What it does:**\n1. Scrapes the VASP Wiki for all documented tags\n2. Parses tag types, descriptions, valid values\n3. Updates src/data/vasp-tags.ts\n\n**Note:** The script respects rate limits. Allow sufficient time for execution.\n\n## Acceptance Criteria\n- [ ] VASP Wiki tool documented\n- [ ] Instructions clear and accurate\n- [ ] Located in appropriate documentation file","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:49:04.369277-06:00","updated_at":"2026-01-05T14:45:33.894718-06:00","closed_at":"2026-01-05T14:45:33.894718-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.3.1","depends_on_id":"vasp-lsp-3ng.3","type":"parent-child","created_at":"2026-01-05T13:49:04.37085-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-u80.2","title":"KPOINTS Support","description":"Implement syntax validation and snippets for KPOINTS generation","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-24T22:56:41.089345-06:00","updated_at":"2026-01-05T15:27:02.179961-06:00","closed_at":"2026-01-05T15:27:02.179961-06:00"}
{"id":"vasp-lsp-3ng.2.3","title":"Improve coverage on weak areas","description":"Improve test coverage on modules below threshold.\n\n## Current Coverage Gaps\nBased on npm test -- --coverage output:\n\n### Critical (\u003c 20%)\n- utils/logger.ts: 15.78% (needs 80%)\n  - Mock connection.console for testing\n  - Test all log levels (info, warn, error, debug)\n  - Test initialization and null-connection handling\n\n### Moderate (\u003c 75%)\n- features/poscar/hover.ts: 69% → 80%\n  - Test all POSCAR section hovers\n  - Test edge cases (empty files, truncated files)\n\n- features/poscar/semantic-tokens.ts: 73% → 80%\n  - Test all token types\n  - Test edge cases\n\n- features/kpoints/hover.ts: 62% → 80%\n  - Test all generation modes\n  - Test hover for different k-point formats\n\n- features/poscar/linting.ts: 74% → 80%\n  - Lines 168-171, 182-196, 223-230, etc.\n\n## Files to create/modify\n- Create: src/__tests__/unit/logger.test.ts\n- Expand: src/__tests__/unit/poscar-hover.test.ts\n- Expand: src/__tests__/unit/kpoints-hover.test.ts\n\n## Acceptance Criteria\n- [ ] logger.ts coverage: 80%+\n- [ ] poscar/hover.ts coverage: 80%+\n- [ ] poscar/semantic-tokens.ts coverage: 80%+\n- [ ] kpoints/hover.ts coverage: 80%+\n- [ ] All coverage thresholds maintained","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T13:48:41.677491-06:00","updated_at":"2026-01-05T14:40:42.570144-06:00","closed_at":"2026-01-05T14:40:42.570144-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.2.3","depends_on_id":"vasp-lsp-3ng.2","type":"parent-child","created_at":"2026-01-05T13:48:41.678795-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-u80","title":"Epic: VASP 6.5.x Feature Parity","description":"Implement missing file type support (KPOINTS, POTCAR) and advanced features (Formatting, Rename). Need to research VASP 6.5.x syntax for these files.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T22:40:01.270377-06:00","updated_at":"2026-01-05T15:27:07.092833-06:00","closed_at":"2026-01-05T15:27:07.092833-06:00","dependencies":[{"issue_id":"vasp-lsp-u80","depends_on_id":"vasp-lsp-u80.1","type":"parent-child","created_at":"2025-12-24T22:56:51.778075-06:00","created_by":"daemon"},{"issue_id":"vasp-lsp-u80","depends_on_id":"vasp-lsp-u80.2","type":"parent-child","created_at":"2025-12-24T22:56:53.033182-06:00","created_by":"daemon"},{"issue_id":"vasp-lsp-u80","depends_on_id":"vasp-lsp-u80.3","type":"parent-child","created_at":"2025-12-24T22:56:54.288643-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0.4","title":"Extract file type detection to utility","description":"Consolidate duplicate regex patterns (/INCAR/i, /POSCAR/i, etc.) scattered across lsp-server.ts into a single getFileType() utility. Pre-compile regex patterns as constants to avoid recompilation overhead.","notes":"File type detection is now centralized in getFileType() method. All handlers refactored to use this single method consistently (completed as part of cache-first pattern work in vasp-lsp-na0.3). No more duplicate regex patterns scattered across handlers.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:44:57.962695-06:00","updated_at":"2025-12-29T21:54:27.782115-06:00","closed_at":"2025-12-29T21:54:27.782123-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.4","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:44:57.963229-06:00","created_by":"daemon"}]}
{"id":"vasp-language-server-me1.3","title":"Enhance POTCAR parser for legacy formats","description":"Expand parsePotcar to handle a wider variety of legacy VASP POTCAR formats to improve robustness.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:02:56.677435-06:00","updated_at":"2026-01-05T13:11:31.957431-06:00","closed_at":"2026-01-05T13:11:31.957437-06:00","dependencies":[{"issue_id":"vasp-language-server-me1.3","depends_on_id":"vasp-language-server-me1","type":"parent-child","created_at":"2026-01-05T13:02:56.678604-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-5k4","title":"Epic: Client Extensions","description":"Create dedicated client extensions for VS Code and Neovim to make installation easier (instead of manual stdio configuration).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T22:40:01.57109-06:00","updated_at":"2026-01-05T15:30:55.168618-06:00","closed_at":"2026-01-05T15:30:55.168618-06:00"}
{"id":"vasp-lsp-3ng.1.4","title":"Consolidate Token and type definitions","description":"Move scattered Token and TokenType definitions to a central location.\n\n## Problem\nToken interfaces and TokenType definitions are scattered across:\n- src/features/incar/parsing.ts (IncarToken, IncarTokenType)\n- src/features/poscar/parsing.ts (Token, TokenType)\n- src/features/kpoints/parsing.ts (KpointsToken)\n- src/features/crystal/parsing.ts (CrystalToken)\n\n## Solution\n1. Create src/types/tokens.ts with:\n   - BaseToken interface\n   - TokenType union type (combining all types)\n   - File-specific token types extending BaseToken\n\n2. Or create src/types/common.ts for broader type consolidation\n\n3. Re-export from individual modules for backwards compatibility\n\n## Files to modify\n- Create: src/types/tokens.ts or src/types/common.ts\n- Update all parsing.ts files to import from central location\n\n## Acceptance Criteria\n- [ ] Central token type definitions\n- [ ] Backwards-compatible exports\n- [ ] All tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T13:48:14.051036-06:00","updated_at":"2026-01-05T14:50:30.077528-06:00","closed_at":"2026-01-05T14:50:30.077528-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.1.4","depends_on_id":"vasp-lsp-3ng.1","type":"parent-child","created_at":"2026-01-05T13:48:14.052464-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0.2","title":"Remove unsafe 'any' type casts","description":"Fix type safety issues: (1) poscar/linting.ts:22 - unsafe any cast in poscarBlockLinters, (2) utils/util.ts:63 - loose equality comparison, (3) Multiple (t: any) in filter/map operations in poscar/linting.ts","notes":"Fixed type safety issues: exported Token interface from parsing.ts, removed all any casts from poscar/linting.ts (lines 22, 105, 243), fixed loose equality to strict equality in utils/util.ts:63.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T21:44:56.031959-06:00","updated_at":"2025-12-29T21:50:17.031826-06:00","closed_at":"2025-12-29T21:50:17.031848-06:00","dependencies":[{"issue_id":"vasp-lsp-na0.2","depends_on_id":"vasp-lsp-na0","type":"parent-child","created_at":"2025-12-29T21:44:56.033856-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.3.2","title":"Update architecture diagram in docs/ARCHITECTURE.md","description":"Add visual diagram showing data flow through the LSP server.\n\n## Problem\nThe distinction between 'Features' and 'Core' is implicit. The architecture documentation lacks a visual diagram.\n\n## Solution\nUpdate docs/ARCHITECTURE.md with:\n\n1. ASCII or Mermaid diagram showing:\n   - LSP Event → LspServer → FeatureProvider → Parser/Linter → Response\n   - DocumentCache integration\n   - File type detection flow\n\n2. Component descriptions:\n   - Core: LspServer, DocumentCache, FeatureProvider\n   - Features: per-file-type modules\n   - Data: vasp-tags.ts, crystal-tags.ts\n   - Tools: vasp-wiki.ts\n\n3. Request/Response lifecycle documentation\n\n## Example Diagram (Mermaid)\n```mermaid\ngraph TD\n    A[LSP Client] --\u003e|Request| B[LspServer]\n    B --\u003e C{getFileType}\n    C --\u003e|incar| D[IncarFeature]\n    C --\u003e|poscar| E[PoscarFeature]\n    D --\u003e F[IncarParser]\n    D --\u003e G[IncarLinter]\n    F --\u003e H[DocumentCache]\n    G --\u003e I[Diagnostics]\n```\n\n## Acceptance Criteria\n- [ ] Visual diagram added\n- [ ] Data flow documented\n- [ ] Component relationships clear","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:49:06.992342-06:00","updated_at":"2026-01-05T14:46:23.369646-06:00","closed_at":"2026-01-05T14:46:23.369646-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.3.2","depends_on_id":"vasp-lsp-3ng.3","type":"parent-child","created_at":"2026-01-05T13:49:06.993584-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-3ng.4.4","title":"Clean up remaining 'any' type usages","description":"Remove or properly type remaining 'any' usages.\n\n## Problem\nESLint @typescript-eslint/no-explicit-any is enabled as 'warn'. Should eliminate all 'any' types for full type safety.\n\n## Investigation\nRun: npm run lint | grep 'any'\n\n## Common 'any' patterns to fix:\n1. Catch clauses: catch(e) → catch(error: unknown)\n2. JSON.parse results: need type guards\n3. External API responses: define interfaces\n4. Dynamic property access: use Record\u003cstring, T\u003e\n\n## Strategy\n1. For each 'any', determine the actual type\n2. Create interfaces where needed\n3. Use type guards for runtime type checking\n4. Consider 'unknown' for truly dynamic data\n\n## Files to check\n- All src/**/*.ts files\n- Especially parsing.ts files\n\n## Acceptance Criteria\n- [ ] No 'any' types in codebase\n- [ ] ESLint no-explicit-any passes (change warn to error)\n- [ ] All tests pass\n- [ ] Type safety improved","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:49:40.71431-06:00","updated_at":"2026-01-05T14:47:16.300665-06:00","closed_at":"2026-01-05T14:47:16.300665-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.4.4","depends_on_id":"vasp-lsp-3ng.4","type":"parent-child","created_at":"2026-01-05T13:49:40.715964-06:00","created_by":"daemon"}]}
{"id":"vasp-lsp-na0","title":"Codebase Optimization \u0026 Quality Improvements","description":"Comprehensive refactoring to improve type safety, error handling, performance, test coverage, and code organization in the DFT Language Server. Based on thorough codebase analysis identifying 26+ issues across 7 categories.","notes":"Epic complete. All 6 child issues resolved: error handling, type safety, cache-first pattern, POSCAR parser logic, ESLint strictness, and file type detection consolidation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T21:44:22.869157-06:00","updated_at":"2025-12-29T21:54:37.787565-06:00","closed_at":"2025-12-29T21:54:37.787571-06:00"}
{"id":"vasp-lsp-3ng.1.3","title":"Standardize diagnostic creation across linters","description":"Ensure consistent diagnostic creation across all linting modules.\n\n## Problem\nPOSCAR linting uses a helper createDiagnostic(), while INCAR creates Diagnostic objects inline. This leads to inconsistent error formatting.\n\n## Solution\n1. Move createDiagnostic to src/utils/util.ts (or src/core/parser-utils.ts)\n2. Standardize function signature:\n   createDiagnostic(range: Range, message: string, severity?: DiagnosticSeverity, code?: string, source?: string): Diagnostic\n\n3. Update all linters to use the standardized helper:\n   - src/features/incar/linting.ts\n   - src/features/poscar/linting.ts\n   - src/features/kpoints/linting.ts\n   - src/features/potcar/linting.ts\n   - src/features/crystal/linting.ts\n\n4. Set consistent source ('vasp-lsp' or file-type specific)\n\n## Acceptance Criteria\n- [ ] Single createDiagnostic helper in utils\n- [ ] All linters use the helper\n- [ ] Consistent source field across all diagnostics\n- [ ] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T13:48:12.319771-06:00","updated_at":"2026-01-05T14:24:22.022744-06:00","closed_at":"2026-01-05T14:24:22.022744-06:00","dependencies":[{"issue_id":"vasp-lsp-3ng.1.3","depends_on_id":"vasp-lsp-3ng.1","type":"parent-child","created_at":"2026-01-05T13:48:12.320386-06:00","created_by":"daemon"}]}
